<div class="header row">
  <div class="col-md-11">
    <h2>Sites</h2>
  </div>
  <div class="col-md-1">
    <button class="btn btn-primary" (click)="openCreateSiteModal(createSite)">
      Add Sites
    </button>
  </div>
</div>
<div class="content">
  <table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Name</th>
        <th scope="col">Connector</th>
        <th scope="col">Token</th>
        <th scope="col">Status</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let site of sites; index as i">
        <th scope="row">{{ i + 1 }}</th>
        <td>
          {{ site.name }}
        </td>
        <td>{{ site.connector.name }}</td>
        <td>{{ site.siteToken.token }}</td>
        <td>{{ site.siteToken.isValid }}</td>
        <td style="width: 15%;">
          <button
            class="btn btn-link"
            (click)="openEditSiteModal(createSite, site)"
          >
            Edit
          </button>
          <button
            class="btn btn-link"
            (click)="openDeleteSiteModal(deleteModal, site.id)"
          >
            Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<ng-template #createSite let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Create Site</h4>
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="modal.dismiss()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div>
      <div class="form-group">
        <label for="name">Name</label>
        <div class="input-group">
          <input
            id="name"
            class="form-control"
            placeholder="Ex - Netflix"
            name="name"
            type="text"
            [(ngModel)]="site.name"
          />
        </div>
      </div>

      <div class="form-group">
        <label for="connector">Connector</label>
        <select
          class="custom-select my-1 mr-sm-2"
          id="inlineFormCustomSelectPref"
          [(ngModel)]="site.connectorId"
        >
          <option selected value="1">Wordpress</option>
        </select>
      </div>
      <div>
        <ngb-alert [type]="success">{{ site.token }}</ngb-alert>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn" (click)="modal.close()" ngbAutofocus>
      Save
    </button>
    <button type="button" class="btn" (click)="modal.dismiss()">
      Cancel
    </button>
  </div>
</ng-template>

<ng-template #deleteModal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Delete Site</h4>
  </div>
  <div class="modal-body">
    Are you sure you want to delete this site?
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-danger"
      (click)="modal.close()"
      ngbAutofocus
    >
      Confirm
    </button>
    <button type="button" class="btn" (click)="modal.dismiss()">
      Cancel
    </button>
  </div>
</ng-template>
